CAPI=2:
name: mono:ip:ibex_cpu:0.1.0
description: Ibex CPU subsystem with tightly coupled instruction memory

filesets:
  rtl:
    files:
      - rtl/ibex_cpu_pkg.sv
      - rtl/ibex_cpu_top.sv
    file_type: systemVerilogSource
    depend:
      - mono:ip:ibex_wb
      - mono:ip:tcm

  # Force generic primitives for simulation/linting (no Xilinx primitives)
  prim_generic:
    depend:
      - lowrisc:prim_generic:clock_gating
      - lowrisc:prim_generic:clock_mux2

targets:
  default: &default
    filesets:
      - "target_lint ? (prim_generic)"
      - "target_sim ? (prim_generic)"
      - rtl

  lint:
    <<: *default
    default_tool: verilator
    toplevel: ibex_cpu_top
    tools:
      verilator:
        mode: lint-only
        verilator_options:
          - -Wall
          # Suppress known Ibex warnings that are benign
          - -Wno-UNUSEDSIGNAL
          - -Wno-UNOPTFLAT
          - -Wno-WIDTH
          - -Wno-CASEINCOMPLETE

  sim:
    <<: *default
    default_tool: verilator
    toplevel: ibex_cpu_top
    tools:
      verilator:
        verilator_options:
          - --trace
          - --trace-fst
